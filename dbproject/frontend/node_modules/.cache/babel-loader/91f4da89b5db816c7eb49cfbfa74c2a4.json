{"ast":null,"code":"import _classCallCheck from \"/Users/yaggy/uni/yr2/cs261/software/dbproject/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yaggy/uni/yr2/cs261/software/dbproject/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yaggy/uni/yr2/cs261/software/dbproject/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yaggy/uni/yr2/cs261/software/dbproject/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yaggy/uni/yr2/cs261/software/dbproject/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yaggy/uni/yr2/cs261/software/dbproject/frontend/src/components/application_form.jsx\";\nimport React, { Component } from 'react';\nimport { Formik } from 'formik';\nimport { Button } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport ls from 'local-storage';\nimport $ from 'jquery';\n\nvar ApplicationForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ApplicationForm, _Component);\n\n  function ApplicationForm(props) {\n    var _this;\n\n    _classCallCheck(this, ApplicationForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ApplicationForm).call(this, props));\n\n    _this.next = function (values) {\n      return _this.setState(function (state) {\n        return {\n          page: Math.min(state.page + 1, _this.props.children.length - 1),\n          values: values\n        };\n      });\n    };\n\n    _this.previous = function () {\n      return _this.setState(function (state) {\n        return {\n          page: Math.max(state.page - 1, 0)\n        };\n      });\n    };\n\n    _this.validate = function (values) {\n      console.log(\"hi\");\n\n      var activePage = React.Children.toArray(_this.props.children)[_this.state.page];\n\n      return activePage.props.validate ? activePage.props.validate(values) : {};\n    };\n\n    _this.handleSubmit = function (values, bag) {\n      var _this$props = _this.props,\n          children = _this$props.children,\n          onSubmit = _this$props.onSubmit;\n      var page = _this.state.page;\n      var isLastPage = page === React.Children.count(children) - 1;\n\n      if (isLastPage) {\n        return onSubmit(values, bag);\n      } else {\n        bag.setTouched({});\n        bag.setSubmitting(false);\n\n        _this.next(values);\n      }\n\n      console.log(values);\n    };\n\n    _this.submit = function (values) {\n      var data = values;\n      var num_alevels = _this.props.num_alevels;\n      var num_lang = Number(_this.props.num_lang);\n      var num_employment = Number(_this.props.num_employment);\n      var num_skills = Number(_this.props.num_skills);\n      var num_hobbies = Number(_this.props.num_hobbies);\n      var a_levels = [];\n      var languages = [];\n      var employment = [];\n      var skills = [];\n      var hobbies = [];\n\n      for (var i = 0; i < num_alevels + 1; i++) {\n        console.log(\"hi\");\n        a_levels.push({\n          'Subject': values[\"a_level\" + i],\n          'Grade': values[\"grade\" + i]\n        });\n      }\n\n      for (var i = 0; i < num_lang + 1; i++) {\n        console.log(\"hi\");\n        languages.push({\n          'Language': values[\"language\" + i],\n          'Expertise': values[\"expertise\" + i]\n        });\n      }\n\n      for (var i = 0; i < num_skills + 1; i++) {\n        console.log(\"hi\");\n        skills.push({\n          'Skill': values[\"skill\" + i],\n          'Expertise': values[\"expertises\" + i]\n        });\n      }\n\n      for (var i = 0; i < num_employment + 1; i++) {\n        console.log(\"hi\");\n        employment.push({\n          'Company': values[\"company\" + i],\n          'Position': values[\"position\" + i]\n        });\n      }\n\n      for (var i = 0; i < num_hobbies + 1; i++) {\n        console.log(\"hi\");\n        hobbies.push({\n          'Hobby': values[\"hobby\" + i],\n          'Interest': values[\"interest\" + i]\n        });\n      }\n\n      var json_data = {\n        \"Name\": values.name,\n        \"DegreeQualification\": values.degree,\n        \"Degree Level\": values.degree_level,\n        \"University Attended\": values.university,\n        \"A-level Qualifications\": a_levels,\n        \"Languages Known\": languages,\n        \"Previous Employment\": employment,\n        \"Skills\": skills,\n        \"Hobbies\": hobbies,\n        \"id\": _this.props.id,\n        \"auth_token\": ls.get(\"auth_token\")\n      };\n      console.log(json_data);\n      $.ajax({\n        url: 'http://localhost:8000/api/applications/submit/',\n        method: 'post',\n        data: JSON.stringify(json_data),\n        success: function success(res) {\n          console.log(res);\n        },\n        error: function error(err) {\n          console.log(err);\n        }\n      });\n    };\n\n    _this.state = {\n      page: 0,\n      values: props.initialValues,\n      num: props.num_alevels\n    };\n    return _this;\n  }\n\n  _createClass(ApplicationForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var children = this.props.children;\n      var _this$state = this.state,\n          page = _this$state.page,\n          values = _this$state.values;\n      var activePage = React.Children.toArray(children)[page];\n      var isLastPage = page === React.Children.count(children) - 1;\n      return React.createElement(Formik, {\n        initialValues: values,\n        enableReinitialize: false,\n        validate: this.validate,\n        onSubmit: this.handleSubmit,\n        render: function render(_ref) {\n          var values = _ref.values,\n              handleSubmit = _ref.handleSubmit,\n              isSubmitting = _ref.isSubmitting,\n              handleReset = _ref.handleReset;\n          return React.createElement(\"form\", {\n            onSubmit: handleSubmit,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, activePage, React.createElement(\"div\", {\n            style: {\n              width: '350px',\n              margin: 'auto'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, page > 0 && React.createElement(\"div\", {\n            style: {\n              float: 'left'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, React.createElement(Button, {\n            color: \"info\",\n            onClick: _this2.previous,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 131\n            },\n            __self: this\n          }, \"\\xAB Previous\")), !isLastPage && React.createElement(\"div\", {\n            style: {\n              float: 'right'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          }, React.createElement(Button, {\n            color: \"info\",\n            type: \"submit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 139\n            },\n            __self: this\n          }, \"Next \\xBB\")), isLastPage && React.createElement(\"div\", {\n            style: {\n              float: 'right'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          }, React.createElement(Button, {\n            color: \"info\",\n            onClick: _this2.submit.bind(_this2, _this2.state.values),\n            type: \"submit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: \"/jobs\",\n            style: {\n              color: \"white\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145\n            },\n            __self: this\n          }, \"Submit\")))));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return ApplicationForm;\n}(Component);\n\nApplicationForm.Page = function (_ref2) {\n  var children = _ref2.children;\n  return children;\n};\n\nexport default ApplicationForm;","map":{"version":3,"sources":["/Users/yaggy/uni/yr2/cs261/software/dbproject/frontend/src/components/application_form.jsx"],"names":["React","Component","Formik","Button","Link","ls","$","ApplicationForm","props","next","values","setState","state","page","Math","min","children","length","previous","max","validate","console","log","activePage","Children","toArray","handleSubmit","bag","onSubmit","isLastPage","count","setTouched","setSubmitting","submit","data","num_alevels","num_lang","Number","num_employment","num_skills","num_hobbies","a_levels","languages","employment","skills","hobbies","i","push","json_data","name","degree","degree_level","university","id","get","ajax","url","method","JSON","stringify","success","res","error","err","initialValues","num","isSubmitting","handleReset","width","margin","float","bind","color","Page"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Formik } from 'formik';\nimport { Button } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport ls from 'local-storage';\nimport $ from 'jquery';\n\nclass ApplicationForm extends Component {\n\tstatic Page = ({ children }) => children;\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpage: 0,\n\t\t\tvalues: props.initialValues,\n\t\t\tnum: props.num_alevels\n\t\t};\n\t}\n\n\n\n\tnext = values =>\n\t\tthis.setState(state => ({\n\t\t\tpage: Math.min(state.page + 1, this.props.children.length - 1),\n\t\t\tvalues,\n\t\t}));\n\n\tprevious = () =>\n\t\tthis.setState(state => ({\n\t\t\tpage: Math.max(state.page - 1, 0),\n\t\t}));\n\n\tvalidate = values => {\n\t\tconsole.log(\"hi\")\n\t\tconst activePage = React.Children.toArray(this.props.children)[\n\t\t\tthis.state.page\n\t\t];\n\t\treturn activePage.props.validate ? activePage.props.validate(values) : {};\n\t};\n\n\thandleSubmit = (values, bag) => {\n\t\tconst { children, onSubmit } = this.props;\n\t\tconst { page } = this.state;\n\t\tconst isLastPage = page === React.Children.count(children) - 1;\n\t\tif (isLastPage) {\n\t\t\treturn onSubmit(values, bag);\n\t\t} else {\n\t\t\tbag.setTouched({});\n\t\t\tbag.setSubmitting(false);\n\t\t\tthis.next(values);\n\t\t}\n\t\tconsole.log(values)\n\n\n\t};\n\n\tsubmit = (values) => {\n\t\tvar data = values;\n\t\tvar num_alevels = this.props.num_alevels;\n\t\tvar num_lang = Number(this.props.num_lang);\n\t\tvar num_employment = Number(this.props.num_employment);\n\t\tvar num_skills = Number(this.props.num_skills);\n\t\tvar num_hobbies = Number(this.props.num_hobbies);\n\t\tvar a_levels = [];\n\t\tvar languages = [];\n\t\tvar employment = [];\n\t\tvar skills = [];\n\t\tvar hobbies = [];\n\t\tfor (var i = 0; i < num_alevels+1; i++) {\n\t\t\tconsole.log(\"hi\")\n\t\t\ta_levels.push({'Subject': values[\"a_level\"+i], 'Grade': values[\"grade\"+i]})\n\t\t}\n\n\t\tfor (var i = 0; i < num_lang+1; i++) {\n\t\t\tconsole.log(\"hi\")\n\t\t\tlanguages.push({'Language': values[\"language\"+i], 'Expertise': values[\"expertise\"+i]})\n\t\t}\n\n\t\tfor (var i = 0; i < num_skills+1; i++) {\n\t\t\tconsole.log(\"hi\")\n\t\t\tskills.push({'Skill': values[\"skill\"+i], 'Expertise': values[\"expertises\"+i]})\n\t\t}\n\n\t\tfor (var i = 0; i < num_employment+1; i++) {\n\t\t\tconsole.log(\"hi\")\n\t\t\temployment.push({'Company': values[\"company\"+i], 'Position': values[\"position\"+i]})\n\t\t}\n\n\t\tfor (var i = 0; i < num_hobbies+1; i++) {\n\t\t\tconsole.log(\"hi\")\n\t\t\thobbies.push({'Hobby': values[\"hobby\"+i], 'Interest': values[\"interest\"+i]})\n\t\t}\n\n\n\t\tvar json_data = {\"Name\": values.name, \"DegreeQualification\": values.degree, \"Degree Level\": values.degree_level, \"University Attended\": values.university, \"A-level Qualifications\": a_levels, \"Languages Known\": languages, \"Previous Employment\": employment, \"Skills\": skills, \"Hobbies\": hobbies, \"id\": this.props.id, \"auth_token\": ls.get(\"auth_token\")}\n\n\t\tconsole.log(json_data)\n\n\t\t$.ajax({\n\t\t\turl: 'http://localhost:8000/api/applications/submit/',\n\t\t\tmethod: 'post',\n\t\t\tdata: JSON.stringify(json_data),\n\t\t\tsuccess: res => {\n\t\t\t\tconsole.log(res);\n\t\t\t},\n\t\t\terror: err => {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t});\n\n\n\t}\n\n\trender() {\n\t\tconst { children } = this.props;\n\t\tconst { page, values } = this.state;\n\t\tconst activePage = React.Children.toArray(children)[page];\n\t\tconst isLastPage = page === React.Children.count(children) - 1;\n\t\treturn (\n\t\t\t<Formik\n\t\t\t\tinitialValues={values}\n\t\t\t\tenableReinitialize={false}\n\t\t\t\tvalidate={this.validate}\n\t\t\t\tonSubmit={this.handleSubmit}\n\t\t\t\trender={({ values, handleSubmit, isSubmitting, handleReset }) => (\n\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t{activePage}\n\t\t\t\t\t\t<div style={{width: '350px', margin: 'auto'}}>\n\t\t\t\t\t\t\t{page > 0 && (\n\t\t\t\t\t\t\t\t<div style={{float: 'left'}}>\n\t\t\t\t\t\t\t\t\t<Button color=\"info\" onClick={this.previous}>\n\t\t\t\t\t\t\t\t\t\t« Previous\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!isLastPage &&\n\t\t\t\t\t\t\t\t<div style={{float: 'right'}}>\n\t\t\t\t\t\t\t\t\t<Button color=\"info\" type=\"submit\">Next »</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{isLastPage && (\n\t\t\t\t\t\t\t\t<div style={{float: 'right'}}>\n\t\t\t\t\t\t\t\t\t<Button color=\"info\" onClick={this.submit.bind(this, this.state.values)} type=\"submit\">\n\t\t\t\t\t\t\t\t\t\t<Link to=\"/jobs\" style={{color:\"white\"}}>Submit</Link>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t)}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ApplicationForm;"]},"metadata":{},"sourceType":"module"}